\* TLC Configuration for MPSStreamSlotAllocator.tla
\* Verification of stream slot allocator with backpressure (B1.4)
\*
\* Reference: FORMAL_VERIFICATION_PARAGON_DESIGN.md Appendix B, item 4
\* Code: pytorch-mps-fork/aten/src/ATen/mps/MPSStream.mm

\* Constants for bounded model checking
\* Using small values to keep state space manageable while still exercising key behaviors
CONSTANTS
    NumSlots = 5           \* 5 slots (0=default, 1-4 worker) - production uses 32
    NumThreads = 3         \* 3 concurrent threads
    MaxOperations = 20     \* Bound operations for finite state space
    BackpressureEnabled = TRUE  \* Enable backpressure waiting

\* Specification to check
SPECIFICATION Spec

\* Properties to verify (B1.4 from Opportunity Map)
\* SA.001-SA.006: Safety invariants
INVARIANT SafetyInvariant

\* SA.009: Deadlock freedom
INVARIANT SA_DeadlockFree

\* Liveness properties (checked separately due to cost)
\* Uncomment to verify liveness (takes longer)
\* PROPERTY SA_BackpressureNoLostWakeup
\* PROPERTY SA_SlotEventuallyAvailable
