\* TLC Configuration for TensorLifetime - VULNERABLE CODE
\* This configuration should find a counterexample (use-after-free race)

SPECIFICATION Spec

CONSTANTS
    NumThreads = 2
    NumTensors = 2
    CaptureByValue = FALSE  \* Vulnerable: MaybeOwned borrows without refcount

INVARIANTS
    TypeOK
    NoUseAfterFreeCrashes  \* EXPECTED TO FAIL - race condition exists!

\* Expected outcome: TLC finds violation of NoUseAfterFreeCrashes
\* Counterexample shows the race:
\* 1. CreateTensor(1)
\* 2. StartLayerNorm(1, 1) - no refcount increment (borrow)
\* 3. AcquireMutexEnterDispatch(1) - enters dispatch_sync
\* 4. PythonGCFreeTensor(1) - GC frees MTLBuffer!
\* 5. EncodeWithBuffer(1) - CRASH: use_after_free_crashes = 1
