\* MPSDispatchQueueContext TLC Configuration
\* Opportunity Map B1.5: Dispatch/queue execution context safety

SPECIFICATION Spec

\* Model parameters for bounded verification
CONSTANTS
    NumThreads = 3
    NumQueues = 2
    MaxOps = 5
    AllowUnsafePatterns = FALSE

\* Safety invariants (must hold in all reachable states)
INVARIANTS
    TypeInvariant
    QueueExclusivity
    ThreadQueueConsistency
    ExceptionNotLost
    Safety

\* Core property: No TLS lookup inside dispatch blocks
INVARIANT NoTLSLookupInBlock

\* Properties to check
PROPERTIES
    DeadlockFree

\* Aspirational properties (expected to FAIL with unsafe dispatch patterns)
\* Uncomment to prove hazard exists when UnsafeDispatchSync is used:
\* INVARIANT NoReentrantDeadlock
\* INVARIANT NoReentrantAttempts
\* INVARIANT AllUseCapturedStream
