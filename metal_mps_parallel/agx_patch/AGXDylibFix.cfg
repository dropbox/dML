\* TLC Configuration for AGXDylibFix
\* Run with: java -jar tla2tools.jar -config AGXDylibFix.cfg AGXDylibFix.tla

CONSTANTS
    NULL = 0
    VALID_PTR = 1

\* Check the specification
SPECIFICATION Spec

\* Safety properties - no crashes allowed
INVARIANT NoCrash
INVARIANT ImplValidWhenCalled

\* EXPECTED RESULT:
\* Both invariants should PASS because:
\* 1. The mutex ensures only one thread can modify/read state at a time
\* 2. The direct _impl check in T1_CheckImpl ensures we skip if NULL
\* 3. Therefore T1_CallOriginal is only reached when _impl is valid
