\* TLC Configuration for AGXRaceFix
\* Run with: java -jar tla2tools.jar -config AGXRaceFix.cfg AGXRaceFix.tla

\* Disable deadlock detection - spec terminates at "Done" state (expected)
CHECK_DEADLOCK FALSE

CONSTANTS
    NULL = 0
    VALID_PTR = 1

\* VERIFICATION RESULTS (2025-12-22):
\* ===================================
\* OrigSpec FAILS NoRaceWindow at Path2Unlocked (ImplPtr=1, LockHeld=FALSE)
\* FixedSpec PASSES NoRaceWindow (terminates at Done with ImplPtr=0)
\*
\* This proves the binary patch closes the race window.

\* Check the FIXED specification (should PASS)
SPECIFICATION FixedSpec

\* Safety property: no race window after lock release
INVARIANT NoRaceWindow

\* Additional invariants
INVARIANT ImplPtrValid

\* To verify ORIGINAL bug, change SPECIFICATION to OrigSpec
