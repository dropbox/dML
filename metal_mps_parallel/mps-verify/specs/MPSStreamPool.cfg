\* TLC Configuration for MPSStreamPool
\* Run with: tlc MPSStreamPool.tla -config MPSStreamPool.cfg
\*
\* This verifies the TOCTOU fixes 32.99 and 32.104 in getCurrentStream()

\* Constants - larger values for higher confidence
\* 4 threads, 5 streams for comprehensive coverage
CONSTANTS
    NumThreads = 4
    NumStreams = 5

\* Specification (includes Init, Next, Fairness)
SPECIFICATION Spec

\* Safety invariants to check
INVARIANTS
    TypeOK
    NoUseAfterFree
    TLSBindingValid
    StreamBoundsValid
    MainThreadGetsDefaultStream
    WorkerThreadsAvoidDefaultStream
    ForkInvalidatesTLS
    PoolAliveImpliesCreated
    ExactlyOneMainThread
    Safety

\* Liveness (optional - can be slow)
\* PROPERTIES
\*     EventuallyCompletes
\*     NoDeadlock
