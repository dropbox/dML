# Verification Report - N=1021
Date: Wed Dec 17 06:19 PST 2025
Device: Apple M4 Max (Metal 3, 40 cores)
macOS: 15.7.2

## Patch Integrity
- Base: v2.9.1
- Fork HEAD: 561cb76b528942aed075a4a102393bf431de2dac
- Patch: patches/cumulative-v2.9.1-to-mps-stream-pool.patch
- MD5: 1b29a15407eb4019b4fdb9bf8b5a26d9
- Files: 51

## Test Results
- Metal diagnostics: VISIBLE (MTLCreateSystemDefaultDevice: Apple M4 Max; MTLCopyAllDevices count: 1)
- Python tests: 24/24 PASS (`MPS_TESTS_ALLOW_TORCH_MISMATCH=1 ./tests/run_all_tests.sh`)
  - NOTE: Imported torch git755017b != fork HEAD git561cb76 (TSA annotations are header-only; rebuild not required for runtime tests)
- record_stream_test_tsan: 6/6 PASS (`./tests/record_stream_test_tsan`)
- TSan harness: PASS (0 errors)
  - `./tests/tsan_mps_test -t 8 -i 50`: 32ms
  - `./tests/tsan_mps_test -t 31 -i 100`: 172ms
- CBMC: 4/4 PASS, 0/1190 assertions failed (`./mps-verify/.lake/build/bin/mpsverify cbmc --all`, CBMC v6.8.0)
  - aba_detection: 0/384 failed
  - alloc_free: 0/239 failed
  - tls_cache: 0/318 failed
  - stream_pool: 0/249 failed

## Performance
- Efficiency spot-check (nn.Linear, 2048x2048, batch=64): 72.4%
  - 1 thread: 483 ops/s
  - 2 threads: 700 ops/s
  - Speedup: 1.45x

## Patch Regen
- `./scripts/regenerate_cumulative_patch.sh --check`: PASS (aliases verified)

## mpsverify (Full Suite)
- `./mps-verify/.lake/build/bin/mpsverify check --all`
  - TLA+: Skipped (TLC not found)
  - CBMC: PASS (4/4 harnesses, 0/1190 assertions failed)
  - Static analysis: Skipped (requires compile_commands.json)
